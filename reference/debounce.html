<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container {
            position: relative;
            display: flex;
            width: 400px;
            height: 200px;
            background-color: gray;
            overflow: hidden;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <p>
            What is Lorem Ipsum?
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the
            industry's standard
            dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a
            type specimen
            book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining
            essentially
            unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
            passages, and more
            recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </p>
        <p>
            What is Lorem Ipsum?
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the
            industry's
            standard
            dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a
            type
            specimen
            book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining
            essentially
            unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
            passages, and
            more
            recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </p>
        <p>
            What is Lorem Ipsum?
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the
            industry's
            standard
            dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a
            type
            specimen
            book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining
            essentially
            unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
            passages, and
            more
            recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </p>
        <p>
            What is Lorem Ipsum?
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the
            industry's
            standard
            dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a
            type
            specimen
            book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining
            essentially
            unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
            passages, and
            more
            recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </p>
        <p>
            What is Lorem Ipsum?
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the
            industry's
            standard
            dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a
            type
            specimen
            book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining
            essentially
            unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
            passages, and
            more
            recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </p>

    </div>
    <script>

        /**
         * leading 선행
         * trailing 후행
         */
        function debounceWithOption(func, wait = 20, option = { leading: true, trailing: true }) {
            let timerID = null;
            let trailingArgs = null;
            return function debounced(...args) {
                trailingArgs = args;
                if (!timerID && option.leading) {
                    func.apply(null, args);
                } else {
                    trailingArgs = args;
                }
                clearTimeout(timerID);
                timerID = setTimeout(() => {
                    if (option.trailing && trailingArgs) {
                        func.apply(null, trailingArgs);
                    }
                    trailingArgs = null;
                    timerID = null;
                }, wait);


            }

        }


        /**
         * debounce동작 원리
         * scroll이벤트가 끝난 후 최후 한번 실행이 목적.
         */
        function debcoune(func, wait = 20, immediate = false) {
            let timerID = null;
            return (...rest) => {
                //console.log('arguments', rest);
                let args = rest;
                //console.log('args', args);
                const later = function () {
                    timerID = null;
                    if (!immediate) {
                        func.apply(null, rest);
                    }
                }
                const callNow = timerID === null;
                clearTimeout(timerID);
                timerID = setTimeout(later, wait);
                callNow && func.apply(null, rest);
            }
        }

        const container = document.querySelector('.container');

        const onScrollEvent = (e, ...rest) => {
            console.log('event', e, 'rest', ...rest);
        }

        container.addEventListener('scroll', debcoune(onScrollEvent, 100));
    </script>
</body>

</html>